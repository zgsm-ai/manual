---
sidebar_position: 3
---

# v2.1.0

## 新增Plan开发模式

### Plan模式

严肃编程，遵从「计划制定→分步实施」流程。适用于渐进式开发和任务管理，确保项目有序推进。

## 架构与性能优化

### 动态模型加载

将 claude-code 模型转换为动态加载机制，通过按需加载，优化内存使用和启动性能。

### 终端简化

对 VSCode 和 JetBrains 等编辑器的终端集成进行简化，提升开发者体验。

### 目录扫描优化

通过缓存 gitignore 检查结果优化目录扫描性能，减少重复计算。

## 工具系统增强

### 模型特定工具定制

新增 `excludedTools` 和 `includedTools` 配置，支持为不同模型定制可用的工具集合，提升模型适配灵活性。

### 可选工具支持

添加 `customTools` 功能，支持用户按需启用特定工具，提供更精细的工具管控。

### 文本替换工具

添加 `search_and_replace` 工具用于批量文本替换操作，以及 `search_replace` 原生工具用于单次精准替换。

**重要变更**: 从 `write_to_file` 工具中移除 `line_count` 参数，简化工具接口。

## 原生工具生态扩展

### 多提供商支持

启用 DeepSeek、Doubao、Requesty 和其他多个 AI 提供商的原生工具支持，扩大生态覆盖。

### 主流平台集成

为 OpenAI 兼容提供商、Vertex Gemini、Grok、Bedrock 等平台添加原生工具支持，增强互操作性。

## 稳定性与错误处理

### 竞态条件修复

修复原生协议中 `new_task` 工具的竞态条件问题，提升并发场景下的稳定性。

### 异常处理增强

处理格式错误的原生工具调用以防止系统挂起，增强鲁棒性。

### 模型获取优化

修复 Vercel AI Gateway 的模型获取问题，确保模型服务可用性。

**改进**: 增强错误消息的可读性，并优化文档链接，便于用户快速定位问题。

## 用户体验提升

### 显示模式管理

支持用户在聊天中灵活切换不同的显示模式。

### 自动批准机制优化

改进后续建议中自动批准计时器的可见性，提供更直观的时间反馈。优化交互逻辑，当用户开始输入时自动取消自动批准超时，避免意外操作。

### 国际化 improvements

更新 i18n 相关功能，改进多种语言中 skipHint 提示文本的清晰度，提升多语言用户体验。

## 测试与开发工具

### 终端测试更新

更新终端测试模拟和 Shell 路径处理逻辑，确保测试环境的准确性和一致性。